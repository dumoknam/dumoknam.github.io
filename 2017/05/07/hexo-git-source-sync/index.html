<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Hexo 포스트 소스파일 github 연동 (Edit 버튼 달기) · Anything</title><meta name="description" content="Hexo 포스트 소스파일 github 연동 (Edit 버튼 달기) - Dumok Nam"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/solarized-light.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Anything"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="https://avatars2.githubusercontent.com/u/2771223?v=3&amp;s=460" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/dumoknam" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Hexo 포스트 소스파일 github 연동 (Edit 버튼 달기) <a href="https://github.com/dumoknam/hexo_posts/edit/master/hexo-git-source-sync.md"><i class="fa fa-pencil-square"></i></a></h1><div class="tags"><a href="/tags/hexo/" class="tag-title">#hexo</a><a href="/tags/github/" class="tag-title">#github</a><a href="/tags/jade/" class="tag-title">#jade</a></div><div class="post-info">May 7, 2017</div><div class="post-content"><h3 id="edit-버튼을-달자"><a href="#edit-버튼을-달자" class="headerlink" title="edit 버튼을 달자"></a>edit 버튼을 달자</h3><p>포스트를 별도의 github repository에 관리하고,<br>포스트 상세페이지에서 edit 버튼을 달아서<br>블로그에서 github의 edit 페이지로 자동 연결하는 방법이다.</p>
<p>hexo 의 gandalfr 테마를 기준으로 작성하였다. (jade 템플릿)<br><a id="more"></a></p>
<h2 id="목표"><a href="#목표" class="headerlink" title="목표"></a>목표</h2><p>포스트 타이틀 옆에 연필 아이콘을 달고,<br>아이콘을 클릭하면 github의 포스트 원본 소스로 이동한다.<br>이후 포스팅을 통해 원본 소스를 수정, commit 하면 hexo가 자동 재배포되는 기능도 추가할 것이다.</p>
<h2 id="step"><a href="#step" class="headerlink" title="step"></a>step</h2><ol>
<li>head.jade 파일에 font awesome css 파일 추가</li>
<li>_config.yml 파일에 github repo 주소 추가</li>
<li>post 타이틀에 링크 추가</li>
</ol>
<p>간단하다. 차례대로 해보자.</p>
<h3 id="head-jade"><a href="#head-jade" class="headerlink" title="head.jade"></a>head.jade</h3><p>themes/gandalfr/layout/partial/head.jade 파일을 열고, 세 줄의 link 아래에 다음 코드를 추가하자.<br><figure class="highlight plain"><figcaption><span>themes/gandalfr/layout/partial/head.jade</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">link(rel=&quot;stylesheet&quot;, href=url_for(&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;))</div></pre></td></tr></table></figure></p>
<h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h3><p>블로그 루트 디렉토리의 _config.yml 파일 맨 아래에 github repository 주소를 추가하자.<br>본인 id와 repository로 변경하자.<br>이 블로그의 설정된 예시는 아래와 같다.</p>
<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># github post directory</span></div><div class="line"><span class="string">github_post_edit_path</span> <span class="string">:</span> <span class="attr">https://github.com/dumoknam/hexo_posts/edit/master/</span></div><div class="line"><span class="comment"># github_post_edit_path : https://github.com/본인id/본인repository/edit/master/</span></div></pre></td></tr></table></figure>
<h3 id="post-jade"><a href="#post-jade" class="headerlink" title="post.jade"></a>post.jade</h3><p>포스트 레이아웃 파일에 링크 아이콘을 달자.<br>themes/gandalfr/layout/mixins/post.jade 파일을 열고, 제일 아래에 45 라인쯤 부터 시작하는 mixin post(item)을 다음 코드로 변경하자</p>
<figure class="highlight plain"><figcaption><span>themes/gandalfr/layout/mixins/post.jade</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//- Post Page</div><div class="line">mixin post(item)</div><div class="line">    .post</div><div class="line">        article.post-block</div><div class="line">            h1.post-title</div><div class="line">                != item.title + &apos; &apos;</div><div class="line">                - var links = item.path.split(&apos;/&apos;)</div><div class="line">                - var last_value = links[links.length-2]</div><div class="line">                a(href=config.github_post_edit_path+last_value+&apos;.md&apos;)</div><div class="line">                    i.fa.fa-pencil-square</div><div class="line"></div><div class="line">            .tags</div><div class="line">                if item.tags</div><div class="line">                    for tag in item.tags.toArray()</div><div class="line">                        a.tag-title(href=url_for(tag.path))</div><div class="line">                            != &apos;#&apos; + tag.name</div><div class="line">            +postInfo(item)</div><div class="line">            .post-content</div><div class="line">                != item.content</div></pre></td></tr></table></figure></div></article></div></main><footer><div class="paginator"><a href="/2017/10/24/start-Django-2-0/" class="prev">PREV</a><a href="/2017/05/07/hi-there/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'dumok';
var disqus_identifier = '2017/05/07/hexo-git-source-sync/';
var disqus_title = 'Hexo 포스트 소스파일 github 연동 (Edit 버튼 달기)';
var disqus_url = 'http://yoursite.com/2017/05/07/hexo-git-source-sync/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//dumok.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 - 2018 <a href="http://yoursite.com">Dumok Nam</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" crossorigin="anonymous"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.js" crossorigin="anonymous"></script><script>$(document).ready(function() { $('pre').each(function(i, block) { hljs.highlightBlock(block); }); });</script></body></html>